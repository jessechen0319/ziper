package com.ziper;

import org.junit.Test;

import static org.junit.Assert.*;

public class ZipFileVisitorTest {
	
	byte[] bytes = new byte[]{
			0x50,
			0x4B,
			0x03,
			0x04,
			0x0A,
			0x00,
			0x00,
			0x00,
			0x00,
			0x00,
			(byte)0xE7,
			(byte)0xBD,
			(byte)0x9A,
			0x51,
			(byte)0xB7,
			(byte)0xEF,
			(byte)0xDC,
			(byte)0x83,
			0x01,
			0x00,
			0x00,
			0x00,
			0x01,
			0x00,
			0x00,
			0x00,
			0x05,
			0x00,
			0x00,
			0x00,
			0x61,
			0x2E,
			0x74,
			0x78,
			0x74,
			0x31,
			0x50,
			0x4B,
			0x03,
			0x04,
			0x0A,
			0x00,
			0x00,
			0x00,
			0x00,
			0x00,
			(byte)0xE7,
			(byte)0xBD,
			(byte)0x9A,
			0x51,
			(byte)0xB7,
			(byte)0xEF,
			(byte)0xDC,
			(byte)0x83,
			0x01,
			0x00,
			0x00,
			0x00,
			0x01,
			0x00,
			0x00,
			0x00,
			0x05,
			0x00,
			0x00,
			0x00,
			0x61,
			0x2E,
			0x74,
			0x78,
			0x74,
			0x32
	};

	@Test
	public void visit() {
		ZipFileVisitor visitor = new ZipFileVisitor();
		visitor.visit(bytes);
		assertEquals(2, visitor.getFileHeaderVisitors().size());
		assertEquals("2", new String(visitor.getFileHeaderVisitors().get(1).getCompressionData()));
	}
}